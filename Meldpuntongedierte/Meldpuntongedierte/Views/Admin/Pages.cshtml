@using Meldpunt.Models;
@using Meldpunt.Utils;
@model List<PageModel>
@{
  /**/

  ViewBag.Title = "Admin";
  var locations = ViewBag.Locations;
  Layout = "~/Views/Shared/_Admin.cshtml";
}
<h1>Beheer pagina's</h1>

<div class="list-item list-item-header">
  <div class="title">Titel</div>
  <div class="url">Url</div>
</div>

@foreach (PageModel p in Model)
{
  @pageItem(p);
}

<a href="/admin/newpage" class="btn btn-info new-button js-new-page">Nieuwe pagina</a>


@helper pageItem(PageModel page)
{
  <div class="list-item">
    <div class="title"><a class="link-to-edit" href="/admin/editpage/@page.Id">@page.Title</a></div>
    <div class="url">@page.Url</div>
  </div>
  foreach (PageModel subpage in page.SubPages)
  {
  <div class="subpages">
    @pageItem(subpage)
  </div>
  }
}
