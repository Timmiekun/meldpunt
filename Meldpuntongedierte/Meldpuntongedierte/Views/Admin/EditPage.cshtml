@using Meldpunt.Models;
@using Meldpunt.Utils;
@model PageModel
@{
  ViewBag.Title = "Admin";
  var locations = ViewBag.Locations;
  Layout = "~/Views/Shared/_Admin.cshtml";
}

<a href="/admin/newpage?parentid=@Model.Id" class="js-new-page btn btn-info">Nieuwe pagina</a>

<h1>@Model.Title</h1>

<a class="viewPage btn btn-info" href="@Model.Url" target="_blank">Pagina bekijken</a>

<form method="post">

  <div class="checkboxes">

    <div class="field">
      <label for="publish">
        @Html.CheckBoxFor(p => p.Published)
        gepubliceerd
      </label>
    </div>

    <div class="field">
      <label for="publish">
        @Html.CheckBoxFor(p => p.InTabMenu)
        tonen in top menu
      </label>
    </div>

    <div class="field">
      <label for="publish">
        @Html.CheckBoxFor(p => p.InHomeMenu)
        tonen in hoofd menu
      </label>
    </div>

    <div class="field">
      <label for="Sort">
        <input type="number" name="Sort" style="width:50px" value="@Model.Sort" />
        sorteer nummer
      </label>
    </div>

  </div>

  <div class="field">
    <label for="MetaDescription">Meta Titel</label>
    <input type="text" name="EditableTitle" class="form-control" value="@Model.Title" />
  </div>

  <div class="field">
    <label for="MetaDescription">Meta description</label>
    <textarea id="MetaDescription" class="form-control" name="MetaDescription" type="text">@Model.MetaDescription</textarea>
  </div>

  <div class="field">
    <label for="UrlPart">Url</label>
    <div class="input-group">
      <div class="input-group-prepend">
        <span class="input-group-text" id="inputGroupPrepend">@Model.ParentPath</span>
      </div>
      <input type="text" name="UrlPart" class="form-control" value="@(Model.UrlPart ?? Model.Id)" />
    </div>
  </div>

  <div class="field">
    <label for="content">Content</label>
    <textarea id="content" name="content" class="richtext">
			@Model.Content
		</textarea>
  </div>

  @if (Model.LastModified.HasValue)
  {
    <div class="field">
      Voor het laatst aangepast: <b>@Model.LastModified.Value.ToString("R")</b>
    </div>
  }

  <input type="hidden" name="Id" value="@Model.Id" />
  <input type="hidden" name="Guid" value="@Model.Guid" />
  <input type="submit" value="opslaan" class="float-left btn btn-info" />
</form>

<form action="/admin/deletepage" class="js-delete-page">
  <input type="hidden" name="Id" value="@Model.Id" />
  <input type="submit" value="pagina verwijderen" class="float-right btn btn-danger" />
</form>



@section menu{
  <div class="menu">
    <ul>
      <li><a href="/admin/pages">Pagina's</a></li>
      @if (!String.IsNullOrWhiteSpace(Model.ParentId))
      {
        <li><a href="/admin/editpage/@Model.ParentId">@Model.ParentId.Capitalize()</a></li>
      }
      <li class="subpages">
        <b>@Model.Title</b>
        <ul>
          @foreach (PageModel p in Model.SubPages)
          {
            <li class="subpages">
              <a href="/admin/editpage/@p.Guid">@p.Title</a>
            </li>
          }
        </ul>
      </li>

      <li><a href="/admin/places">Plaatsen</a></li>
      <li><a href="/admin/redirects">Redirects</a></li>
      <li><a href="/admin/images">Afbeeldingen</a></li>
    </ul>
  </div>
}