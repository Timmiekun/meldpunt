@using Meldpunt.Models;
@using Meldpunt.Utils;
@model PageModel
@{
  ViewBag.Title = "Admin";
  var locations = ViewBag.Locations;
  Layout = "~/Views/Shared/_Admin.cshtml";
}

<h1>@Model.HeaderTitle</h1>

<a class="viewPage" href="@Model.Url" target="_blank">Pagina bekijken</a>

<form method="post">   
  <div  class="field">
    <label for="publish">
      @Html.CheckBoxFor(p => p.Published)      
      gepubliceerd
    </label>
  </div>
  
  <div  class="field">
    <label for="publish">
      @Html.CheckBoxFor(p => p.InTabMenu)      
      tonen in top menu
    </label>
  </div>

  <div class="field">
    <label for="MetaDescription">Title</label>
	  @Html.TextBoxFor(m=> m.Title)
@*    <input type="text" name="Title" style="width:100%" value="@Model.Title" />*@
  </div>
  
  <div class="field">
    <label for="MetaDescription">Meta description</label>
    <textarea id="MetaDescription" style="width:100%;height: 40px;" name="MetaDescription" type="text" >@Model.MetaDescription</textarea>
  </div>

   

  <div class="field">
    <label for="content">Content</label>
    <textarea id="content" name="content" class="richtext">
      @Model.Content
    </textarea>
  </div>
  <input type="hidden" name="Id" value="@Model.Id" />
  <input type="submit" value="opslaan" />
</form>

<form action="/admin/deletepage" class="js-delete-page">
  <input type="hidden" name="Id" value="@Model.Id" />
  <input type="submit" value="pagina verwijderen" />
</form>

<a href="/admin/newpage?parentid=@Model.Id" class="js-new-page">Nieuwe pagina</a>

@section menu{
 <div class="menu">
   <h2>Pagina's</h2>
   <ul>
     <li><a href="/admin">Home</a></li>
     @foreach(PageModel p in Model.SubPages){
       <li>
         <a href="/admin/editpage/@p.Id">@p.Title</a>
       </li>
     }
    </ul>
 </div>
  
  <div class="menu">
  <h2>Gemeenten</h2>
  <ul>
    @foreach(var kv in locations){
      string url = ((string)kv.Key).XmlSafe();
       <li>
        <a href="/admin/editplaats/@url">@kv.Key</a>  
       </li>
    }
  </ul>
</div>
}